# RobotHead（Raspberry Pi Zero 2W）仕様

## 概要
RobotHead（Zero2W）は、ロボットの知能的な制御・外部通信・高次処理を担うシングルボードコンピュータです。主に以下の機能を担当します。

## 主な機能

### 1. センサ・デバイス制御
- カメラ（CSI）による映像取得・画像処理（例：顔/物体検出、地図生成）
- ToFセンサ（VL53L8CX）による距離計測
- マイク（ReSpeaker HAT）による音声入力
- 目のLED（LEDx2）の制御（感情表現・状態表示）

### 2. ロボット制御・状態管理
- RobotBody（Pico2）とのUART通信によるモーター/IMU/異常状態の監視・指令
- PCとのMQTT通信による高次コマンド・状態同期
- 状態遷移管理（通常運転/縮小運転/異常時）

### 3. 高次処理・外部連携
- 画像認識（OpenCV/YOLO等）
- （参考）音声認識・合成：PCで処理し、音声データのみ受信・再生
- （参考）地図生成・自己位置推定：PC/クラウドで処理し、簡易な障害物回避のみローカル対応
- PCやクラウドとの連携（MQTT/HTTP等）

### 4. 安全・縮小運転対応
- Pico2からの異常通知受信時の即時対応（例：全体停止、警告表示）
- PC/クラウド通信断時の縮小運転（例：簡易自律制御、最低限の安全確保）

### 5. 拡張余地
- 複数センサ融合による高度な状況認識
- 感情表現・会話AI連携（目のLED制御を含む）
- バッテリー・温度等のシステム監視

## 通信仕様（概要）
- UART（Pico2と直結、ASCIIコマンド/IMU CSV/ALERT通知）
- MQTT（PC/クラウドとJSONコマンド/状態同期）
- コマンド例：
    - Pico2へ: Rxx, Dyy, S（モーター制御）
    - Pico2から: IMU, ALERT（IMUデータ・異常通知）
    - PC/クラウドへ: 状態/センサデータ送信
    - PC/クラウドから: 高次コマンド受信

## 実装上の注意
- Pico2からの異常通知は最優先で処理し、安全側に倒す
- 通信断時は縮小運転モードへ自動遷移
- センサ・デバイスの初期化・監視を安定して行う

---

（本仕様は今後の拡張・実装に応じて随時更新）
